<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTDC Auto-Track</title>
    <script>
        async function fetchAWB() {
            try {
                console.log("Requesting clipboard access...");

                // Read AWB number from clipboard
                const awb = await navigator.clipboard.readText();

                if (!awb) {
                    alert("Clipboard is empty! Copy your AWB number first.");
                    return;
                }

                // Store AWB in localStorage (persists across pages)
                localStorage.setItem("awbNumber", awb);
                console.log("AWB stored in localStorage:", awb);

                // DEBUG: Check if AWB is correctly saved
                console.log("Verify AWB in localStorage:", localStorage.getItem("awbNumber"));
                
                // Redirect to DTDC tracking page
                window.location.href = "https://www.dtdc.in/trace.asp";

            } catch (error) {
                alert("Clipboard access blocked! Click inside the page and try again.");
                console.error("Clipboard error:", error);
            }
        }
    </script>
</head>
<body>
    <h2>Click the button below to open DTDC Tracking:</h2>
    <button onclick="fetchAWB()">Open DTDC Tracking</button>
</body>
</html>
